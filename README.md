# Отказоустойчивый перенос данных из Postgres в Elasticsearch

При изменении данных в PostgreSQL данные автоматически будут выгружены, преобразованы и загружены в ElasticSearch (extract - transform - load)


## Инструкция для запуска

Для работы будут развернуты 3 контейнера - Postresql, Redis (для хранения последнего проверенного состояния) и ElasticSearch 

1. Для начала необходимо остановить эти сервисы локально командой (если они были запущены)

```sudo systemctl stop {service_name}```

2. Далее необходимо создать и заполнить файл ```.env``` в директории ```etl/```, пример заполнения находится в ```.env.example```

3. Запускаем билд командой 

```sudo docker-compose build --no-cache```

4. Запускаем контейнеры

```sudo docker-compose up -d```

5. Для загрузки данных из PostgreSQL в ElasticSearch необходимо запустить команду из терминала (из директории ```etl/```)

```python load_data_to_elastic.py```


Готово! Данные будут выгружаться при необходимости.